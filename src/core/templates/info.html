<!-- This is the info page -->

{% extends "base.html" %}

{% block title %}Project Information – DMS Inc.{% endblock %}

{% block infoActive %}class="active"{% endblock %}

{% block content %}
<style>
/* Adds space between info boxes only on this page */
main.content-narrow .card {
  margin-bottom: 40px; /* more breathing room between cards */
}

/* State conversion toggle + list */
.state-conversion-header {
  margin-top: 16px;
  margin-bottom: 4px;
  font-size: 0.95rem;
  color: var(--muted);
}

.btn-toggle {
  margin-top: 8px;
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid var(--outline);
  background: transparent;
  color: var(--text);
  font-size: 0.9rem;
  cursor: pointer;
}

.btn-toggle:hover {
  border-color: var(--accent);
}

.state-conversion-list {
  margin-top: 16px;
  padding-top: 10px;
  border-top: 1px solid var(--outline);
}

.state-conversion-list.hidden {
  display: none;
}

.state-conversion-list ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.state-conversion-list li {
  padding: 6px 0;
  font-size: 0.95rem;
}

.state-conversion-list strong {
  display: inline-block;
  min-width: 140px;
}
</style>

<main class="content-narrow">
  <h1>Project Information</h1>
  <p class="lead">Where to find inputs and who built this tool.</p>

  <!-- Credits moved to the top -->
  <section class="card">
    <h2>Credits</h2>

    <h3>Research team</h3>
    <ul class="simple-list">
      <li>Pouria Mohammadi — University of Utah</li>
      <li>Sadegh Asgari — Merrimack College</li>
      <li>Abbas Rashidi — University of Utah</li>
      <li>Sara Asgari — University of Pennsylvania</li>
      <li>Farzane Asgari — Columbia University</li>
    </ul>

    <h3>Website development</h3>
    <ul class="simple-list">
      <li>Sean Ouellette — Lead Backend Developer</li>
      <li>Maxwell Sprogis — UI Lead &amp; Project Manager</li>
      <li>David Hamilton — Documentation Lead &amp; Frontend</li>
    </ul>
  </section>

  <section class="card">
    <h2>Where to Find Input Data</h2>

    <p>
      All soil-related inputs (soil pH, soil moisture, drainage class, and electrical conductivity)
      can be obtained from the USDA Web Soil Survey:
      <a href="https://websoilsurvey.nrcs.usda.gov/app/" target="_blank" rel="noopener">
        https://websoilsurvey.nrcs.usda.gov/app/
      </a>.
    </p>

    <p>
      Once you have the latitude and longitude for the culvert location, you can enter them directly here:
      <a href="https://websoilsurvey.nrcs.usda.gov/app/WebSoilSurvey.aspx" target="_blank" rel="noopener">
        https://websoilsurvey.nrcs.usda.gov/app/WebSoilSurvey.aspx
      </a>.
    </p>

    <p>Basic Web Soil Survey workflow for this project:</p>
    <ol class="simple-list">
      <li>
        Open Web Soil Survey and click <strong>Start WSS</strong>.
      </li>
      <li>
        Use the <strong>Quick Navigation</strong> panel (e.g., Latitude/Longitude, Address, or
        State/County) to zoom to the culvert’s location.
      </li>
      <li>
        On the <strong>Area of Interest (AOI)</strong> tab, draw a rectangle or polygon around the culvert
        to define a small AOI that includes the structure and immediate surroundings.
      </li>
      <li>
        Switch to the <strong>Soil Data Explorer</strong> tab and open
        <em>Soil Properties and Qualities</em>. From there, run reports for:
        soil pH, electrical conductivity, soil drainage class, and other properties needed by the Rate form.
      </li>
      <li>
        View the tables or export them (Printable Version / Shopping Cart) and copy the relevant values into
        this tool’s input fields.
      </li>
    </ol>
  </section>

  <section class="card">
    <h2>How Results Are Presented</h2>

    <p>
      When you submit the Rate form, the platform sends your inputs
      (culvert material, shape, age, soil pH, soil electrical conductivity, soil moisture,
      drainage class, flood frequency, and state) to a trained probabilistic model that was
      built from a curated culvert dataset. The system returns:
    </p>

    <ul class="simple-list">
      <li>
        Predicted condition rating (1–5) — a single “best estimate” of the culvert’s
        condition on a Utah-style 1–5 scale, where lower values indicate poorer condition and higher values
        indicate better condition.
      </li>
      <li>
        Full probability distribution — the output from each model is provided so the user can see if there was any uncertainty.
      </li>
      <li>
        Downloadable report (PDF) — a printable summary that captures the inputs, predicted
        rating, and probability distribution for recordkeeping and communication with
        colleagues or stakeholders.
      </li>
    </ul>
  </section>

  <section class="card" id="state-conversions">
    <h2>State conversion ratings</h2>

    <p>
      Different agencies use different culvert condition-rating systems (for example, 0–9 bridge-style scales,
      1–4 “good/fair/poor/critical” scales, or other custom codes). To keep things consistent, this tool
      converts all of them to a single Utah 1–5 condition rating scale before modeling.
    </p>

    <p>
      The Utah 1–5 scale is used as the common reference. All participating states in the dataset are mapped
      into this shared 1–5 system so that “poor” in one state lines up with “poor” in another.
    </p>

    <div class="state-conversion-header">
      Click to see every state conversion:
    </div>

    <button
      type="button"
      id="state-toggle"
      class="btn-toggle"
    >
      See all state conversions
    </button>

<div id="state-conversion-list" class="state-conversion-list hidden">
  <div class="simple-list">
    <p>
      The model dataset combines culvert inventories from four states: Utah, Colorado, Ohio, and Vermont.
      Because each DOT uses a different rating scale, all ratings are converted into Utah’s 1–5 scale
      during preprocessing so the model is trained on consistent labels.
    </p>

    <ul class="simple-list">
      <li>
        <strong>Utah (UDOT)</strong> —
        Uses the native 5-point culvert condition scale (1–5). This is the baseline; no conversion is required.
      </li>

      <li>
        <strong>Colorado (CDOT)</strong> —
        Uses a 9-point condition scale. These 9-point ratings are converted into the Utah 5-point scale
        based on matching the inspection criteria.
      </li>

      <li>
        <strong>Ohio (ODOT)</strong> —
        Uses a 9-point condition scale. These 9-point ratings are converted into the Utah 5-point scale
        based on matching the inspection criteria.
      </li>

      <li>
        <strong>Vermont (VTrans)</strong> —
        Uses a 7-point condition scale. These 7-point ratings are converted into the Utah 5-point scale
        based on matching the inspection criteria.
      </li>
    </ul>

    <figure style="margin: 14px 0 0;">
      <img
        src="/img/State_conversions.png"
        alt="State rating conversion diagram mapping Vermont and Colorado/Ohio scales into Utah’s 1–5 scale"
        style="width:100%; max-width:700px; margin: 0 auto; border-radius: 14px; border: 1px solid var(--outline);"
      />
    </figure>
  </div>
</div>

  </section>
</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const btn = document.getElementById('state-toggle');
    const list = document.getElementById('state-conversion-list');

    if (!btn || !list) return;

    btn.addEventListener('click', function () {
      const isHidden = list.classList.toggle('hidden');
      btn.textContent = isHidden
        ? 'See all state conversions'
        : 'Hide state conversions';
    });
  });
</script>
{% endblock %}
