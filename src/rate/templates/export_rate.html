{% extends "base.html" %}

{% block title %}Export Rate Data â€” DMS Inc.{% endblock %}

{% block content %}

<!-- Main container for the export summary -->
<main class="content-narrow">

  <!-- Card: Rating summary -->
  <section class="card export-card">

    <!-- Page intro text -->
    <p class="muted">Culvert rating summary</p>

    <!-- Large header -->
    <h1>Your rating</h1>

    <!-- Main rating badge -->
    <p style="margin: 0.5rem 0;">
      <span style="
          display:inline-block;
          padding:0.2rem 0.9rem;
          border-radius:999px;
          border:1px solid rgba(148,163,184,0.6);
          font-size:1.2rem;
          font-weight:600;
        ">
        {{ overall_rating or 5 }}
      </span>
    </p>

    <!-- Text explanation of the condition (comes from describe_condition()) -->
    <p class="lead">
      {{ condition_label or "S minus is in very good condition." }}
    </p>

    <!-- Section for RandomForest + XGBoost model outputs -->
    <div style="margin-top: 1rem;">
      <h2 style="margin-bottom: 0.5rem;">Model outputs</h2>

      <!-- Simple model list -->
      <ul style="list-style: none; padding: 0; margin: 0;">
        <li><strong>Random forest</strong> {{ random_rating or 5 }}</li>
        <li><strong>XGBoost</strong> {{ xgb_rating or 5 }}</li>
      </ul>

      <!-- Helpful hint below model results -->
      <p class="muted" style="margin-top: 0.5rem; font-size: 0.9rem;">
        Ratings range from 1 (poor) to 5 (excellent).
      </p>
    </div>

    <!-- Buttons: Export + Rate another -->
    <div class="actions" style="margin-top: 1.5rem;">
      <button
        class="btn btn-primary"
        type="button"
        onclick="window.print()"
        title="Export this summary to PDF"
      >
        Export to PDF
      </button>

      <!-- Back button -->
      <a href="{{ url_for('rate.index') }}" class="btn">
        Rate another culvert
      </a>
    </div>

  </section>

  <!-- If input_rows exists, display a table of all user inputs -->
  {% if input_rows %}
  <section class="card export-card">
    <h2>Input data</h2>

    <!-- Table with labels + values -->
    <table class="export-table" style="width: 100%; border-collapse: collapse; font-size: 0.95rem;">
      <tbody>
        {% for label, value in input_rows %}
        <tr>
          <th scope="row"
              style="text-align: left; padding: 0.4rem 0.6rem;
                     border-bottom: 1px solid rgba(148, 163, 184, 0.4);">
            {{ label }}
          </th>

          <td style="padding: 0.4rem 0.6rem;
                     border-bottom: 1px solid rgba(148, 163, 184, 0.4);">
            {{ value }}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>
  {% endif %}

</main>

{% endblock %}
